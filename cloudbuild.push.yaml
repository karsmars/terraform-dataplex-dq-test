steps:
  - name: 'hashicorp/terraform:light'
    id: 'validate-format'
    entrypoint: sh
    args:
      - -c
      - |
        echo "ğŸ§ª Initializing Terraform"
        terraform init

        echo "ğŸ” Validating Terraform configuration"
        terraform validate

        echo "ğŸ§¼ Checking Terraform formatting"
        if ! terraform fmt -check -diff -recursive; then
          echo ""
          echo "âŒ Terraform files are not properly formatted."
          echo "ğŸ’¡ Run 'terraform fmt' locally and push the changes."
        else
          echo "âœ… Formatting looks good"
        fi

options:
  logging: CLOUD_LOGGING_ONLY
